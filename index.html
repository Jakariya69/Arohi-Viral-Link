<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mim Premium - Official</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    
    <script src="//niphaumeenses.net/vignette.min.js" data-zone="10530857" data-sdk="show_10530857"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Urbanist:wght@400;700;900&display=swap');
        body { font-family: 'Urbanist', sans-serif; background: #f8fafc; user-select: none; margin: 0; overflow-x: hidden; }
        .sub-page { display: none; padding-bottom: 110px; }
        .sub-page.active { display: block; }
        nav { position: fixed; bottom: 0; left: 0; right: 0; height: 75px; background: white; display: flex; border-top: 1px solid #f1f5f9; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); }
        .nav-btn { color: #94a3b8; display: flex; flex-direction: column; align-items: center; font-size: 10px; font-weight: 800; gap: 4px; border: none; background: none; flex: 1; }
        .nav-active { color: #7c3aed; }
        
        #video-player-section { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000; z-index: 5000; display: none; flex-direction: column; justify-content: center; align-items: center; }
        #video-player-section.active-player { display: flex; }
        .video-container { position: relative; width: 100%; max-width: 100%; background: #000; aspect-ratio: 16/9; }
        video { width: 100%; height: 100%; object-fit: contain; }
        
        #seeking-warning { display: none; position: absolute; inset: 0; background: rgba(0, 0, 0, 0.98); color: white; flex-direction: column; justify-content: center; align-items: center; z-index: 2000; text-align: center; padding: 20px; }
        .ad-banner-container { width: 100%; display: center; justify-content: center; margin-top: 10px; background: white; padding: 5px 0; border-radius: 10px; }
        
        .notice-content { font-size: 14px; font-weight: 900; letter-spacing: 0.5px; text-transform: uppercase; }

        /* 10s Timer Styles */
        #ad-loader { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 9999; flex-direction: column; justify-content: center; align-items: center; color: white; }
        .timer-circle { width: 60px; height: 60px; border: 4px solid #7c3aed; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Support Chat UI */
        #chat-ui { display: none; position: fixed; inset: 0; background: #f8fafc; z-index: 6000; flex-direction: column; }
        .chat-msg-admin { align-self: flex-start; background: #ffffff; color: #1e293b; border-radius: 15px 15px 15px 2px; padding: 12px; margin: 5px; font-size: 13px; max-width: 80%; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .chat-msg-user { align-self: flex-end; background: #7c3aed; color: white; border-radius: 15px 15px 2px 15px; padding: 12px; margin: 5px; font-size: 13px; max-width: 80%; }
    </style>
</head>
<body>

    <div id="chat-ui">
        <div class="bg-white p-4 border-b flex justify-between items-center shadow-sm">
            <h2 class="font-black text-slate-800 uppercase text-sm">Official Support</h2>
            <button onclick="closeChat()" class="p-2 bg-slate-100 rounded-full"><i data-lucide="x" class="w-5 h-5"></i></button>
        </div>
        <div id="chat-box" class="flex-1 overflow-y-auto p-4 flex flex-col space-y-2"></div>
        <div class="p-4 bg-white border-t flex gap-2">
            <input id="chat-input" type="text" placeholder="‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." class="flex-1 bg-slate-100 rounded-2xl p-4 text-sm outline-none font-bold">
            <button onclick="sendMessage()" class="bg-violet-600 text-white p-4 rounded-2xl shadow-lg"><i data-lucide="send" class="w-5 h-5"></i></button>
        </div>
    </div>

    <div id="ad-loader">
        <div class="timer-circle mb-4"></div>
        <h2 class="font-black text-lg uppercase">Loading Video...</h2>
        <p class="text-[11px] text-slate-400 mt-1 uppercase">‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ï‡ßç‡¶∑‡¶£ ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßá‡¶®... ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá</p>
        <div id="countdown-text" class="text-3xl font-black mt-4 text-violet-500">10s</div>
    </div>

    <div id="video-player-section">
        <div class="absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/80 to-transparent">
            <div class="text-white">
                <p class="text-[10px] font-bold opacity-70">Playing Now</p>
                <div id="live-view-count" class="text-xs font-black text-red-500 flex items-center gap-1 mt-1">
                    <i data-lucide="eye" class="w-3 h-3"></i> <span>... views</span>
                </div>
            </div>
            <button onclick="closeVideo()" class="bg-white/10 p-2 rounded-full text-white backdrop-blur-sm">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>

        <div class="video-container shadow-2xl">
            <video id="main-video" controlsList="nodownload" playsinline></video>
            <div id="seeking-warning">
                <i data-lucide="lock" class="w-12 h-12 mb-2 text-red-500"></i>
                <h2 class="font-black text-lg text-red-500">VIDEO LOCKED!</h2>
                <p class="text-[10px] mb-4 uppercase">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ü‡¶æ‡¶®‡¶æ ‡¶®‡¶ø‡¶∑‡ßá‡¶ß‡•§ ‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                <div id="lock-timer" class="text-3xl font-black mb-4">60s</div>
                <button onclick="show_10530857()" class="bg-white text-black px-8 py-3 rounded-2xl font-black text-xs uppercase shadow-xl">Watch Ad to Unlock</button>
            </div>
        </div>
        
        <div class="w-full p-6 text-center">
            <p class="text-white/50 text-[10px] uppercase tracking-widest">Don't close this tab while watching</p>
        </div>
    </div>

    <div id="notice-board" class="hidden bg-gradient-to-r from-indigo-700 to-violet-700 text-white py-3 px-4 shadow-lg">
        <div class="flex items-center gap-3">
            <div class="bg-white/20 p-1.5 rounded-lg animate-pulse">
                <i data-lucide="megaphone" class="w-4 h-4 text-white"></i>
            </div>
            <marquee id="notice-text" class="notice-content"></marquee>
        </div>
    </div>

    <div class="bg-white/90 backdrop-blur-md p-4 sticky top-0 z-50 border-b flex justify-between items-center">
        <div class="flex items-center gap-3">
            <img id="u-photo" src="" class="hidden w-10 h-10 rounded-xl border-2 border-violet-600 object-cover">
            <div id="u-initial-box" class="w-10 h-10 bg-violet-600 rounded-xl flex items-center justify-center text-white font-black">?</div>
            <div>
                <h1 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-fuchsia-600 text-xl italic leading-none">MIM PREMIUM</h1>
                <p id="top-username" class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Loading...</p>
            </div>
        </div>
        <button onclick="supportWithAd()" class="bg-violet-100 p-2 rounded-xl text-violet-600">
            <i data-lucide="headphones" class="w-6 h-6"></i>
        </button>
    </div>

    <div class="ad-banner-container">
        <script type="text/javascript">
            atOptions = {'key' : '68d64b420fe4aeee18352cb08543fd7e','format' : 'iframe','height' : 50,'width' : 320,'params' : {}};
        </script>
        <script type="text/javascript" src="https://www.highperformanceformat.com/68d64b420fe4aeee18352cb08543fd7e/invoke.js"></script>
    </div>

    <div id="pages-container" class="p-4">
        
        <div id="home-page" class="sub-page active">
            
            <div class="mb-4">
                <div class="w-full aspect-video rounded-2xl overflow-hidden shadow-lg border-2 border-white">
                    <img id="main-home-thumb" src="https://via.placeholder.com/640x360" class="w-full h-full object-cover" alt="Thumbnail">
                </div>
            </div>

            <div class="bg-white p-4 rounded-2xl border mb-4 flex gap-3">
                <div class="flex-1 bg-indigo-600 p-4 rounded-2xl text-white shadow-lg">
                    <p class="text-[9px] font-bold opacity-70">BALANCE</p>
                    <p class="text-xl font-black">‡ß≥<span id="display-balance">0.00</span></p>
                </div>
                <div class="flex-1 bg-slate-50 border p-4 rounded-2xl text-center">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Status</p>
                    <p class="text-[11px] font-black text-slate-800"><span id="vid-watch-count">0</span>/10 Videos</p>
                </div>
            </div>

            <div id="episode-list" class="space-y-3"></div>
        </div>

        <div id="task-page" class="sub-page">
            <h2 class="text-center font-black text-slate-400 text-[10px] uppercase mb-4 tracking-widest text-violet-600">Complete Tasks & Earn</h2>
            <div onclick="window.open('https://otieu.com/4/10535907', '_blank')" class="bg-fuchsia-600 p-4 rounded-2xl mb-4 text-center text-white font-black text-xs uppercase shadow-lg cursor-pointer active:scale-95 transition-all">
                 üöÄ Click to Get Bonus Point (AD)
            </div>
            <div id="social-list" class="space-y-3"></div>
        </div>

        <div id="leader-page" class="sub-page">
            <h2 class="text-center font-black text-slate-400 text-[10px] uppercase mb-4 tracking-widest text-violet-600">Top 10 Referral Leaders</h2>
            <div id="leader-list-box" class="bg-white rounded-[30px] border overflow-hidden shadow-sm"></div>
        </div>

        <div id="refer-page" class="sub-page">
            <div class="bg-blue-600 p-8 rounded-[30px] text-center text-white shadow-xl">
                <p class="font-black text-4xl mb-1">‡ß≥30</p>
                <p class="text-[10px] opacity-80 mb-6 uppercase">Per Referral</p>
                <div id="ref-link-display" class="bg-black/20 p-4 rounded-xl text-[9px] font-mono mb-4 break-all select-all">Loading...</div>
                <button onclick="copyRef()" class="w-full bg-white text-blue-700 py-4 rounded-2xl font-black text-xs uppercase">Copy Link</button>
                <p class="mt-4 text-[9px] font-bold opacity-60">Total Refer: <span id="display-ref-count">0</span>/20</p>
            </div>
        </div>

        <div id="profile-page" class="sub-page">
            <div class="bg-white p-6 rounded-[30px] border shadow-sm">
                <h3 class="font-black text-slate-800 text-sm mb-4 uppercase italic flex items-center gap-2">
                    <i data-lucide="wallet" class="w-4 h-4"></i> Withdraw Balance
                </h3>
                <div id="ref-warning" class="bg-red-50 p-4 rounded-2xl mb-4 text-red-600 text-[10px] font-black uppercase">
                    üîí LOCK: Need 20 Refers & 10 Videos Watched.
                </div>
                <input type="number" id="w-amt" placeholder="Amount (Min 500)" class="w-full p-4 bg-slate-50 rounded-2xl mb-3 outline-none font-bold">
                <input type="number" id="w-num" placeholder="Bkash/Nagad Number" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 outline-none font-bold">
                <button id="withdraw-btn" onclick="handleWithdraw()" class="w-full bg-slate-200 text-slate-400 py-4 rounded-2xl font-black uppercase disabled" disabled>Withdraw Locked</button>
            </div>

            <div class="mt-6 space-y-3">
                <p class="text-[10px] font-bold text-slate-400 uppercase text-center tracking-widest">Need Help?</p>
                <button onclick="supportWithAd()" 
                        class="w-full bg-slate-900 text-white p-5 rounded-[25px] flex items-center justify-between shadow-xl active:scale-95 transition-all">
                    <div class="flex items-center gap-4">
                        <div class="bg-violet-500/20 p-3 rounded-2xl text-violet-400">
                            <i data-lucide="message-circle" class="w-6 h-6"></i>
                        </div>
                        <div class="text-left">
                            <p class="text-xs font-black uppercase leading-none">Official Support</p>
                            <p class="text-[9px] font-bold opacity-60 uppercase mt-1">Contact for any issues</p>
                        </div>
                    </div>
                    <i data-lucide="chevron-right" class="w-5 h-5 opacity-40"></i>
                </button>
                <p class="text-center text-[9px] font-bold text-slate-400 uppercase opacity-50">Privacy Policy & Terms</p>
            </div>
        </div>
    </div>

    <nav>
        <button onclick="changePage('home-page', this)" class="nav-btn nav-active"><i data-lucide="play"></i>Videos</button>
        <button onclick="changePage('task-page', this)" class="nav-btn"><i data-lucide="globe"></i>Tasks</button>
        <button onclick="changePage('leader-page', this)" class="nav-btn"><i data-lucide="trophy"></i>Leaders</button>
        <button onclick="changePage('refer-page', this)" class="nav-btn"><i data-lucide="users"></i>Refer</button>
        <button onclick="changePage('profile-page', this)" class="nav-btn"><i data-lucide="wallet"></i>Wallet</button>
    </nav>

    <script>
        const tg = window.Telegram.WebApp; tg.expand();
        const firebaseConfig = { apiKey: "AIzaSyCpNJm6i8cH6GNI5j2XQAiUgU7q-97c150", databaseURL: "https://mini-app-link-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const user = tg.initDataUnsafe?.user || { id: "0000", first_name: "Guest" };
        const userId = "TG-" + user.id;
        let userData = { balance: 0, refCount: 0, videosWatched: 0 };
        let adCounter = {};
        let lastTime = 0;
        let isLocked = false;
        let currentVideoKey = null;

        function init() {
            document.getElementById('top-username').innerText = user.first_name;
            if(user.photo_url) {
                document.getElementById('u-photo').src = user.photo_url;
                document.getElementById('u-photo').classList.remove('hidden');
                document.getElementById('u-initial-box').classList.add('hidden');
            } else { document.getElementById('u-initial-box').innerText = user.first_name[0]; }

            // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶•‡¶æ‡¶Æ‡ßç‡¶¨‡¶®‡ßá‡¶á‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
            db.ref('app_config/home_thumbnail').on('value', s => {
                if(s.exists()) document.getElementById('main-home-thumb').src = s.val();
            });

            // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
            db.ref('support_chats/' + userId).on('value', snap => {
                const box = document.getElementById('chat-box'); box.innerHTML = "";
                snap.forEach(m => {
                    const data = m.val();
                    const style = data.sender === 'admin' ? 'chat-msg-admin' : 'chat-msg-user';
                    box.innerHTML += `<div class="${style}">${data.text}</div>`;
                });
                box.scrollTop = box.scrollHeight;
            });

            db.ref('notice').on('value', s => {
                const nb = document.getElementById('notice-board');
                if(s.exists() && s.val() !== "") {
                    nb.classList.remove('hidden');
                    document.getElementById('notice-text').innerText = s.val();
                } else { nb.classList.add('hidden'); }
            });

            db.ref('user_activity/' + userId).on('value', snap => {
                userData = snap.val() || { balance: 0, refCount: 0, videosWatched: 0, name: user.first_name };
                if(!snap.exists()) db.ref('user_activity/'+userId).set({...userData, username: user.username || ""});
                updateUI();
            });

            loadContent(); loadLeaderboard();
            
            const v = document.getElementById('main-video');
            v.ontimeupdate = () => {
                if (!isLocked && !v.seeking && (v.currentTime > lastTime + 2.1)) {
                    v.pause(); triggerBlock();
                } else if (!v.seeking) { lastTime = v.currentTime; }
            };
            v.onended = () => {
                db.ref('user_activity/' + userId).update({ 
                    videosWatched: (userData.videosWatched || 0) + 1,
                    balance: (userData.balance || 0) + 5
                });
                tg.showAlert("Video Completed! ‡ß≥5 Added.");
            };
        }

        function triggerBlock() {
            isLocked = true;
            document.getElementById('seeking-warning').style.display = "flex";
            let timeLeft = 60;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('lock-timer').innerText = timeLeft + "s";
                if(timeLeft <= 0) {
                    clearInterval(timer); isLocked = false;
                    document.getElementById('seeking-warning').style.display = "none";
                    document.getElementById('main-video').currentTime = lastTime;
                }
            }, 1000);
            db.ref('cheaters/'+userId).set({ name: user.first_name, time: new Date().toLocaleString() });
        }

        function updateUI() {
            document.getElementById('display-balance').innerText = (userData.balance || 0).toFixed(2);
            document.getElementById('display-ref-count').innerText = userData.refCount || 0;
            document.getElementById('vid-watch-count').innerText = userData.videosWatched || 0;
            document.getElementById('ref-link-display').innerText = `https://t.me/arohimimvirallinkjk_bot?start=${user.id}`;
            const wBtn = document.getElementById('withdraw-btn');
            if(userData.refCount >= 20 && (userData.videosWatched || 0) >= 10) {
                wBtn.disabled = false; wBtn.className = "w-full bg-violet-600 text-white py-4 rounded-2xl font-black uppercase shadow-lg";
                wBtn.innerText = "Send Request";
                document.getElementById('ref-warning').classList.add('hidden');
            }
        }

        function loadLeaderboard() {
            db.ref('user_activity').orderByChild('refCount').limitToLast(10).on('value', s => {
                const box = document.getElementById('leader-list-box'); box.innerHTML = "";
                let arr = []; s.forEach(c => arr.push(c.val()));
                arr.reverse().forEach((u, i) => {
                    box.innerHTML += `<div class="p-4 flex justify-between border-b last:border-0 items-center">
                        <span class="text-xs font-black text-slate-300">#${i+1}</span>
                        <span class="flex-1 ml-4 text-[11px] font-bold text-slate-700">${u.name}</span>
                        <span class="bg-violet-50 text-violet-600 px-3 py-1 rounded-full text-[9px] font-black">${u.refCount || 0} Ref</span>
                    </div>`;
                });
            });
        }

        function loadContent() {
            db.ref('tasks').on('value', snap => {
                const list = document.getElementById('episode-list'); list.innerHTML = "";
                snap.forEach(child => {
                    const v = child.val(); const k = child.key;
                    if(!adCounter[k]) adCounter[k] = 0;
                    list.innerHTML += `
                    <div class="bg-white p-3 rounded-2xl flex items-center gap-3 border shadow-sm">
                        <img src="${v.image || 'https://via.placeholder.com/150'}" class="w-16 h-12 rounded-lg object-cover">
                        <div class="flex-1">
                            <h4 class="text-[11px] font-black text-slate-800 uppercase">${v.title || v.name}</h4>
                            <button onclick="unlockStep('${k}', '${v.url}')" class="mt-1 w-full bg-indigo-50 text-indigo-600 py-1.5 rounded-lg text-[9px] font-black uppercase">
                                ${adCounter[k] >= 5 ? 'Play Now' : 'Unlock ('+adCounter[k]+'/5 Ads)'}
                            </button>
                        </div>
                    </div>`;
                });
            });

            db.ref('social_tasks').on('value', snap => {
                const list = document.getElementById('social-list'); list.innerHTML = "";
                snap.forEach(child => {
                    const t = child.val();
                    list.innerHTML += `
                    <div class="bg-white p-4 rounded-2xl flex justify-between items-center border">
                        <div>
                            <p class="text-[10px] font-black text-slate-800 uppercase">${t.name || t.title}</p>
                            <p class="text-[9px] text-green-500 font-bold">Reward: ‡ß≥${t.reward || 0}</p>
                        </div>
                        <button onclick="doSocialTask('${child.key}', '${t.link || t.url}', ${t.reward})" class="bg-slate-900 text-white px-5 py-2 rounded-xl text-[10px] font-black uppercase">Visit</button>
                    </div>`;
                });
            });
        }

        function unlockStep(k, url) {
            if (adCounter[k] < 5) {
                if (typeof show_10530857 === 'function') {
                    show_10530857().then(() => { adCounter[k]++; loadContent(); });
                } else { adCounter[k]++; loadContent(); }
            } else {
                const loader = document.getElementById('ad-loader');
                const countText = document.getElementById('countdown-text');
                loader.style.display = 'flex';
                window.open('https://otieu.com/4/10535907', '_blank');
                let timeLeft = 10;
                const timer = setInterval(() => {
                    timeLeft--;
                    countText.innerText = timeLeft + "s";
                    if(timeLeft <= 0) {
                        clearInterval(timer);
                        loader.style.display = 'none';
                        startVideo(k, url);
                    }
                }, 1000);
            }
        }

        function startVideo(k, url) {
            document.getElementById('video-player-section').classList.add('active-player');
            const v = document.getElementById('main-video'); v.src = url; v.play();
            currentVideoKey = k;
            const viewRef = db.ref('video_stats/' + k + '/views');
            viewRef.transaction(cv => (cv || 0) + 1);
            viewRef.on('value', s => {
                document.getElementById('live-view-count').innerHTML = `<i data-lucide="eye" class="w-3 h-3"></i> <span>${s.val() || 1} views</span>`;
                lucide.createIcons();
            });
        }

        function supportWithAd() {
            if (typeof show_10530857 === 'function') {
                show_10530857().then(() => {
                    document.getElementById('chat-ui').style.display = 'flex';
                });
            } else {
                document.getElementById('chat-ui').style.display = 'flex';
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const txt = input.value;
            if(!txt) return;
            db.ref('support_chats/' + userId).push({
                sender: 'user',
                text: txt,
                time: Date.now(),
                userName: user.first_name
            });
            input.value = "";
        }

        function closeChat() { document.getElementById('chat-ui').style.display = 'none'; }

        function doSocialTask(k, link, reward) {
            window.open(link, '_blank');
            db.ref('user_activity/'+userId).transaction(d => {
                if(d) d.balance = (d.balance || 0) + parseFloat(reward);
                return d;
            });
            tg.showAlert("Task Completed!");
        }

        function closeVideo() { 
            const v = document.getElementById('main-video'); v.pause(); 
            document.getElementById('video-player-section').classList.remove('active-player'); 
            lastTime = 0; 
            if(currentVideoKey) { db.ref('video_stats/' + currentVideoKey + '/views').off(); currentVideoKey = null; }
        }
        
        function changePage(id, el) {
            document.querySelectorAll('.sub-page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            if(el) el.classList.add('nav-active'); lucide.createIcons();
        }

        function copyRef() { navigator.clipboard.writeText(document.getElementById('ref-link-display').innerText); tg.showAlert("Copied!"); }
        
        function handleWithdraw() {
            const amt = document.getElementById('w-amt').value, num = document.getElementById('w-num').value;
            if(amt < 500) return tg.showAlert("Min 500!");
            db.ref('withdrawals').push({ userId, amount: amt, number: num, timestamp: Date.now() });
            tg.showAlert("Request Sent!");
        }

        init(); lucide.createIcons();
    </script>
</body>
</html>
