<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mim Premium - Official</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    
    <script src="//niphaumeenses.net/vignette.min.js" data-zone="10530857" data-sdk="show_10530857"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Urbanist:wght@400;700;900&display=swap');
        body { font-family: 'Urbanist', sans-serif; background: #f8fafc; user-select: none; margin: 0; overflow-x: hidden; }
        .sub-page { display: none; padding-bottom: 110px; }
        .sub-page.active { display: block; }
        nav { position: fixed; bottom: 0; left: 0; right: 0; height: 75px; background: white; display: flex; border-top: 1px solid #f1f5f9; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); }
        .nav-btn { color: #94a3b8; display: flex; flex-direction: column; align-items: center; font-size: 10px; font-weight: 800; gap: 4px; border: none; background: none; flex: 1; }
        .nav-active { color: #7c3aed; }
        #video-player-section { 
    position: fixed; inset: 0; background: #000; z-index: 5000; 
    display: none; flex-direction: column; justify-content: flex-start;
}
.video-container { 
    position: relative; width: 100%; aspect-ratio: 16/9; 
    background: #000; margin-top: 80px; 
}
video { width: 100%; height: 100%; }

#ad-penalty-screen {
    display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95);
    z-index: 6000; flex-direction: column; justify-content: center; align-items: center;
    color: white; text-align: center; padding: 20px;
}
.penalty-timer { font-size: 48px; font-weight: 900; color: #f87171; margin: 15px 0; }
        @keyframes spin { to { transform: rotate(360deg); } }

        #chat-ui { display: none; position: fixed; inset: 0; background: #f8fafc; z-index: 6000; flex-direction: column; }
    </style>
</head>
<body>

    <div id="chat-ui">
        <div class="bg-white p-4 border-b flex justify-between items-center shadow-sm">
            <h2 class="font-black text-slate-800 uppercase text-sm">Official Support</h2>
            <button onclick="closeChat()" class="p-2 bg-slate-100 rounded-full"><i data-lucide="x" class="w-5 h-5"></i></button>
        </div>
        <div id="chat-box" class="flex-1 overflow-y-auto p-4 flex flex-col space-y-2"></div>
        <div class="p-4 bg-white border-t flex gap-2">
            <input id="chat-input" type="text" placeholder="‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." class="flex-1 bg-slate-100 rounded-2xl p-4 text-sm outline-none font-bold">
            <button onclick="sendMessage()" class="bg-violet-600 text-white p-4 rounded-2xl shadow-lg"><i data-lucide="send" class="w-5 h-5"></i></button>
        </div>
    </div>

    <div id="ad-loader">
        <div class="timer-circle mb-4"></div>
        <h2 class="font-black text-lg uppercase">Loading Secure Video...</h2>
        <p class="text-[11px] text-slate-400 mt-1 uppercase text-center px-6">‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        <div class="progress-container">
            <div id="progress-bar"></div>
        </div>
        <div id="countdown-text" class="text-3xl font-black mt-4 text-blue-500">10s</div>
    </div>

        <div id="video-player-section">
        <div class="absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-black/50">
            <div class="text-white">
                <p class="text-[10px] font-black uppercase tracking-widest">Premium Player</p>
            </div>
            <button onclick="closeVideo()" class="bg-white/20 p-2 rounded-full text-white backdrop-blur-sm">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>

        <div class="video-container shadow-2xl">
            <video id="main-video" controls playsinline></video>
        </div>

        <div id="ad-penalty-screen">
            <i data-lucide="alert-octagon" class="w-16 h-16 text-red-500 mb-2"></i>
            <h2 class="text-xl font-black text-red-500 uppercase">Warning: Seeking!</h2>
            <p class="text-[11px] text-slate-400 uppercase text-center px-10">‡¶Ü‡¶™‡¶®‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ü‡ßá‡¶®‡ßá‡¶õ‡ßá‡¶®! ‡¶∂‡¶æ‡¶∏‡ßç‡¶§‡¶ø ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            <div class="penalty-timer" id="penalty-countdown">60s</div>
            <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden max-w-[250px]">
                <div id="penalty-progress" class="bg-red-500 h-full w-0 transition-all"></div>
            </div>
        </div>
    </div>


    <div id="notice-board" class="hidden bg-gradient-to-r from-indigo-700 to-violet-700 text-white py-3 px-4 shadow-lg">
        <div class="flex items-center gap-3">
            <div class="bg-white/20 p-1.5 rounded-lg animate-pulse">
                <i data-lucide="megaphone" class="w-4 h-4 text-white"></i>
            </div>
            <marquee id="notice-text" class="notice-content"></marquee>
        </div>
    </div>

    <div class="bg-white/90 backdrop-blur-md p-4 sticky top-0 z-50 border-b flex justify-between items-center">
        <div class="flex items-center gap-3">
            <img id="u-photo" src="" class="hidden w-10 h-10 rounded-xl border-2 border-violet-600 object-cover">
            <div id="u-initial-box" class="w-10 h-10 bg-violet-600 rounded-xl flex items-center justify-center text-white font-black">?</div>
            <div>
                <h1 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-fuchsia-600 text-xl italic leading-none">MIM PREMIUM</h1>
                <p id="top-username" class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Loading...</p>
            </div>
        </div>
        <button onclick="supportWithAd()" class="bg-violet-100 p-2 rounded-xl text-violet-600">
            <i data-lucide="headphones" class="w-6 h-6"></i>
        </button>
    </div>

    <div class="ad-banner-container">
        <div>
            <script type="text/javascript">
                atOptions = {'key' : '68d64b420fe4aeee18352cb08543fd7e','format' : 'iframe','height' : 50,'width' : 320,'params' : {}};
            </script>
            <script type="text/javascript" src="https://www.highperformanceformat.com/68d64b420fe4aeee18352cb08543fd7e/invoke.js"></script>
        </div>
    </div>

    <div id="pages-container" class="p-4">
        
        <div id="home-page" class="sub-page active">
            <div class="mb-4">
                <div class="w-full aspect-video rounded-2xl overflow-hidden shadow-lg border-2 border-white">
                    <img id="main-home-thumb" src="https://via.placeholder.com/640x360" class="w-full h-full object-cover">
                </div>
            </div>
            <div class="bg-white p-4 rounded-2xl border mb-4 flex gap-3">
                <div class="flex-1 bg-indigo-600 p-4 rounded-2xl text-white shadow-lg">
                    <p class="text-[9px] font-bold opacity-70">BALANCE</p>
                    <p class="text-xl font-black">‡ß≥<span id="display-balance">0.00</span></p>
                </div>
                <div class="flex-1 bg-slate-50 border p-4 rounded-2xl text-center">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Status</p>
                    <p class="text-[11px] font-black text-slate-800"><span id="vid-watch-count">0</span>/10 Videos</p>
                </div>
            </div>
            <div id="episode-list" class="space-y-3"></div>
        </div>

        <div id="task-page" class="sub-page">
            <div onclick="tg.openLink('https://otieu.com/4/10535907')" class="bg-fuchsia-600 p-4 rounded-2xl mb-4 text-center text-white font-black text-xs uppercase shadow-lg">üöÄ Bonus Point (AD)</div>
            <div id="social-list" class="space-y-3"></div>
        </div>

        <div id="leader-page" class="sub-page">
            <div id="leader-list-box" class="bg-white rounded-[30px] border overflow-hidden shadow-sm"></div>
        </div>

        <div id="refer-page" class="sub-page">
            <div class="bg-blue-600 p-8 rounded-[30px] text-center text-white shadow-xl">
                <p class="font-black text-4xl mb-1">‡ß≥30</p>
                <p class="text-[10px] opacity-80 mb-6 uppercase">Per Referral</p>
                <div id="ref-link-display" class="bg-black/20 p-4 rounded-xl text-[9px] font-mono mb-4 break-all">Loading...</div>
                <button onclick="copyRef()" class="w-full bg-white text-blue-700 py-4 rounded-2xl font-black text-xs uppercase">Copy Link</button>
            </div>
        </div>

        <div id="profile-page" class="sub-page">
            <div class="bg-white p-6 rounded-[30px] border shadow-sm mb-4">
                <h3 class="font-black text-slate-800 text-sm mb-4 uppercase flex items-center gap-2"><i data-lucide="wallet"></i> Withdraw</h3>
                <div id="ref-warning" class="bg-red-50 p-4 rounded-2xl mb-4 text-red-600 text-[10px] font-black uppercase">üîí LOCK: Need 20 Ref & 10 Video.</div>
                <input type="number" id="w-amt" placeholder="Amount" class="w-full p-4 bg-slate-50 rounded-2xl mb-3 outline-none font-bold">
                <input type="number" id="w-num" placeholder="Number" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 outline-none font-bold">
                <button id="withdraw-btn" onclick="handleWithdraw()" class="w-full bg-slate-200 text-slate-400 py-4 rounded-2xl font-black uppercase" disabled>Withdraw Locked</button>
            </div>

            <div class="bg-white p-5 rounded-[30px] border shadow-sm space-y-3">
                <h3 class="font-black text-slate-800 text-xs mb-2 uppercase flex items-center gap-2"><i data-lucide="help-circle"></i> Support & Help</h3>
                <button onclick="supportWithAd()" class="w-full flex items-center justify-between p-3 bg-violet-50 rounded-2xl border border-violet-100">
                    <span class="text-[11px] font-black text-slate-700 uppercase">Live Chat Support</span>
                    <i data-lucide="chevron-right" class="w-4 h-4 text-slate-400"></i>
                </button>
            </div>
        </div>
    </div>

    <nav>
        <button onclick="changePage('home-page', this)" class="nav-btn nav-active"><i data-lucide="play"></i>Videos</button>
        <button onclick="changePage('task-page', this)" class="nav-btn"><i data-lucide="globe"></i>Tasks</button>
        <button onclick="changePage('leader-page', this)" class="nav-btn"><i data-lucide="trophy"></i>Leaders</button>
        <button onclick="changePage('refer-page', this)" class="nav-btn"><i data-lucide="users"></i>Refer</button>
        <button onclick="changePage('profile-page', this)" class="nav-btn"><i data-lucide="wallet"></i>Wallet</button>
    </nav>

     <script>
        const tg = window.Telegram.WebApp; tg.expand();
        // Firebase Configuration
        const firebaseConfig = { apiKey: "AIzaSyCpNJm6i8cH6GNI5j2XQAiUgU7q-97c150", databaseURL: "https://mini-app-link-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const user = tg.initDataUnsafe?.user || { id: "0000", first_name: "Guest" };
        const userId = "TG-" + user.id;

        let userData = { balance: 0, refCount: 0, videosWatched: 0 };
        let adCounter = {};
        let lastTime = 0;
        const video = document.getElementById('main-video');

        function init() {
            document.getElementById('top-username').innerText = user.first_name;
            if(user.photo_url) {
                document.getElementById('u-photo').src = user.photo_url;
                document.getElementById('u-photo').classList.remove('hidden');
                document.getElementById('u-initial-box').classList.add('hidden');
            } else { 
                document.getElementById('u-initial-box').innerText = user.first_name[0]; 
            }

            db.ref('app_config/home_thumbnail').on('value', s => {
                if(s.exists()) document.getElementById('main-home-thumb').src = s.val();
            });

            db.ref('notice').on('value', s => {

                if(s.exists() && s.val() !== "") {
                    document.getElementById('notice-board').classList.remove('hidden');
                    document.getElementById('notice-text').innerText = s.val();
                } else {
                    document.getElementById('notice-board').classList.add('hidden');
                }
            });

            db.ref('user_activity/' + userId).on('value', snap => {
                userData = snap.val() || { balance: 0, refCount: 0, videosWatched: 0, name: user.first_name };
                updateUI();
            });

                    let penaltyTimer; 

        video.addEventListener('timeupdate', () => {
            if (document.getElementById('ad-penalty-screen').style.display === 'flex') return;
            if (!video.seeking) {
                if (video.currentTime > lastTime + 2.5) {
                    video.pause();
                    video.currentTime = lastTime; 
                    startPenalty();
                } else { lastTime = video.currentTime; }
            }
        });

        function startPenalty() {
            const screen = document.getElementById('ad-penalty-screen');
            const timerText = document.getElementById('penalty-countdown');
            const bar = document.getElementById('penalty-progress');
            const adBox = document.getElementById('penalty-ad-container');
            
            screen.style.display = 'flex';
            let timeLeft = 60;

            if(adBox) adBox.innerHTML = '<iframe src="https://otieu.com/4/10535907" width="100%" height="250" frameborder="0" style="border-radius:15px; background:white;"></iframe>';

            penaltyTimer = setInterval(() => {
                timeLeft--;
                timerText.innerText = timeLeft + "s";
                bar.style.width = ((60 - timeLeft) / 60) * 100 + '%';

                if (timeLeft <= 0) {
                    clearInterval(penaltyTimer);
                    screen.style.display = 'none';
                    if(adBox) adBox.innerHTML = ''; 
                    video.play();
                    tg.showAlert("‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶∂‡ßá‡¶∑! ‡¶è‡¶ñ‡¶® ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§");
                }
            }, 1000);
        }


            video.addEventListener('ended', () => {
                db.ref('user_activity/' + userId).update({ 
                    videosWatched: (userData.videosWatched || 0) + 1,
                    balance: (userData.balance || 0) + 5
                });
                tg.showAlert("Video Completed! ‡ß≥5 Added.");
                closeVideo();
            });

            loadContent(); 
            loadLeaderboard();
        }

        function unlockStep(k, url) {
            if (!adCounter[k]) adCounter[k] = 0;
            if (adCounter[k] < 5) {
                if (typeof show_10530857 === 'function') {
                    show_10530857().then(() => { adCounter[k]++; loadContent(); });
                } else { adCounter[k]++; loadContent(); }
            } else {
                document.getElementById('ad-loader').style.display = 'flex';
                let timeLeft = 10;
                document.getElementById('progress-bar').style.width = '0%';

                const timer = setInterval(() => {
                    timeLeft--;
                    document.getElementById('progress-bar').style.width = ((10 - timeLeft) / 10) * 100 + '%';
                    document.getElementById('countdown-text').innerText = timeLeft + "s";
                    if(timeLeft <= 0) {
                        clearInterval(timer);
                        document.getElementById('ad-loader').style.display = 'none';
                        
                        // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶≤‡¶ú‡¶ø‡¶ï
                        lastTime = 0; 
                        video.src = url;
                        video.load(); // ‡¶è‡¶ü‡¶ø ‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø
                        
                        document.getElementById('video-player-section').classList.add('active-player');
                        
                        video.play().catch(e => {
                            console.log("Auto-play blocked");
                            tg.showAlert("‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡ßç‡¶≤‡ßá ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
                        });
                    }
                }, 1000);
            }
        }

                function closeVideo() { 
            video.pause(); 
            video.src = "";
            if(typeof penaltyTimer !== 'undefined') clearInterval(penaltyTimer);
            document.getElementById('ad-penalty-screen').style.display = 'none';
            document.getElementById('video-player-section').classList.remove('active-player');
        }


        

        function updateUI() {
            document.getElementById('display-balance').innerText = (userData.balance || 0).toFixed(2);
            document.getElementById('vid-watch-count').innerText = userData.videosWatched || 0;
            document.getElementById('ref-link-display').innerText = `https://t.me/arohimimvirallinkjk_bot?start=${user.id}`;
            const wBtn = document.getElementById('withdraw-btn');
            if(userData.refCount >= 20 && (userData.videosWatched || 0) >= 10) {
                wBtn.disabled = false; 
                wBtn.className = "w-full bg-violet-600 text-white py-4 rounded-2xl font-black uppercase";
                wBtn.innerText = "Send Request"; 
                document.getElementById('ref-warning').classList.add('hidden');
            }
        }

        function loadLeaderboard() {
            db.ref('user_activity').orderByChild('refCount').limitToLast(10).on('value', s => {
                const box = document.getElementById('leader-list-box'); box.innerHTML = "";
                let arr = []; s.forEach(c => arr.push(c.val()));
                arr.reverse().forEach((u, i) => {
                    box.innerHTML += `<div class="p-4 flex justify-between border-b last:border-0 items-center">
                        <span class="text-xs font-black text-slate-300">#${i+1}</span>
                        <span class="flex-1 ml-4 text-[11px] font-bold text-slate-700">${u.name || 'Anonymous'}</span>
                        <span class="bg-violet-50 text-violet-600 px-3 py-1 rounded-full text-[9px] font-black">${u.refCount || 0} Ref</span>
                    </div>`;
                });
            });
        }

        function loadContent() {
            db.ref('tasks').on('value', snap => {
                const list = document.getElementById('episode-list'); list.innerHTML = "";
                snap.forEach(child => {
                    const v = child.val(); const k = child.key;
                    list.innerHTML += `<div class="bg-white p-3 rounded-2xl flex items-center gap-3 border shadow-sm">
                        <img src="${v.image || 'https://via.placeholder.com/150'}" class="w-16 h-12 rounded-lg object-cover">
                        <div class="flex-1">
                            <h4 class="text-[11px] font-black text-slate-800 uppercase">${v.title || v.name}</h4>
                            <button onclick="unlockStep('${k}', '${v.url}')" class="mt-1 w-full bg-indigo-50 text-indigo-600 py-1.5 rounded-lg text-[9px] font-black uppercase">
                                ${adCounter[k] >= 5 ? 'Play Now' : 'Unlock ('+adCounter[k]+'/5 Ads)'}
                            </button>
                        </div>
                    </div>`;
                });
            });
            
            db.ref('social_tasks').on('value', snap => {
                const list = document.getElementById('social-list'); 
                if(!list) return;
                list.innerHTML = "";
                snap.forEach(child => {
                    const t = child.val();
                    list.innerHTML += `<div class="bg-white p-4 rounded-2xl flex justify-between items-center border">
                        <div>
                            <p class="text-[10px] font-black text-slate-800 uppercase">${t.name || t.title}</p>
                            <p class="text-[9px] text-green-500 font-bold">Reward: ‡ß≥${t.reward || 0}</p>
                        </div>
                        <button onclick="tg.openLink('${t.link || t.url}')" class="bg-slate-900 text-white px-5 py-2 rounded-xl text-[10px] font-black uppercase">Visit</button>
                    </div>`;
                });
            });
        }

        function changePage(id, el) {
            document.querySelectorAll('.sub-page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            if(el) el.classList.add('nav-active'); lucide.createIcons();
        }

        function supportWithAd() { document.getElementById('chat-ui').style.display = 'flex'; }
        function closeChat() { document.getElementById('chat-ui').style.display = 'none'; }
        function copyRef() { 
            navigator.clipboard.writeText(document.getElementById('ref-link-display').innerText); 
            tg.showAlert("Refer Link Copied!"); 
        }
// ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function handleWithdraw() {
    const amount = document.getElementById('w-amt').value;
    const number = document.getElementById('w-num').value;
    if(!amount || !number) return tg.showAlert("‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!");
    if(amount < 100) return tg.showAlert("‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");

    db.ref('withdrawals').push({
        userId: userId,
        amount: amount,
        number: number,
        name: user.first_name,
        time: Date.now()
    }).then(() => {
        tg.showAlert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
        document.getElementById('w-amt').value = "";
        document.getElementById('w-num').value = "";
    });
}

// ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function sendMessage() {
    const input = document.getElementById('chat-input');
    const msg = input.value;
    if(!msg) return;
    db.ref('support_chats/' + userId).push({ sender: 'user', text: msg, time: Date.now() });
    input.value = "";
}

// ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
db.ref('support_chats/' + userId).on('value', snap => {
    const box = document.getElementById('chat-box');
    if(!box) return;
    box.innerHTML = "";
    snap.forEach(m => {
        const d = m.val();
        const style = d.sender === 'user' ? 'bg-violet-600 text-white self-end' : 'bg-slate-200 text-slate-800 self-start';
        box.innerHTML += `<div class="${style} p-3 mb-2 rounded-2xl text-[11px] font-bold max-w-[80%]">${d.text}</div>`;
    });
    box.scrollTop = box.scrollHeight;
});

        init(); 
        lucide.createIcons();
    </script>


